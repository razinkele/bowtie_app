---
title: "Analyse des Risques Environnementaux par N≈ìud Papillon"
subtitle: "Manuel Utilisateur & Documentation Technique"
author: "√âquipe Marbefes"
date: "Novembre 2025"
version: "5.3.0"
output:
  pdf_document:
    toc: true
    toc_depth: 3
    number_sections: true
    fig_caption: true
    df_print: kable
    latex_engine: lualatex
header-includes:
  - \usepackage{fancyhdr}
  - \usepackage{graphicx}
  - \usepackage{hyperref}
  - \pagestyle{fancy}
  - \fancyhead[L]{Analyse des Risques Environnementaux par N≈ìud Papillon}
  - \fancyhead[R]{Version 5.3.0}
  - \fancyfoot[C]{\thepage}
---

\newpage

# R√©sum√© Ex√©cutif

L'application **Analyse des Risques Environnementaux par N≈ìud Papillon** (version 5.3.0) est une application web R Shiny compl√®te con√ßue pour l'√©valuation des risques environnementaux utilisant des diagrammes en n≈ìud papillon enrichis avec l'int√©gration de r√©seaux bay√©siens. Cette √©dition pr√™te pour la production fournit une plateforme robuste pour analyser les menaces sur la biodiversit√© marine et les impacts sur les services √©cosyst√©miques gr√¢ce √† la mod√©lisation probabiliste.

## Fonctionnalit√©s Principales

- **Cr√©ation Interactive de Diagrammes en N≈ìud Papillon** : √âvaluation visuelle des risques avec fonctionnalit√© glisser-d√©poser
- **Flux de Travail Guid√© en 8 √âtapes** : Assistant pas √† pas pour une analyse syst√©matique des risques
- **Int√©gration de R√©seaux Bay√©siens** : Mod√©lisation probabiliste des risques environnementaux
- **Support Multilingue** : Interfaces en anglais et fran√ßais
- **12 Sc√©narios Environnementaux** : Mod√®les pr√©-configur√©s pour les sc√©narios de risque courants
- **Base de Donn√©es de Vocabulaire** : 189 √©l√©ments environnementaux (53 activit√©s, 36 pressions, 74 contr√¥les, 26 cons√©quences)
- **Capacit√©s d'Export** : Options d'export Excel, RDS et visuelles
- **Pr√™t pour D√©ploiement R√©seau** : Configur√© pour le r√©seau local et le d√©ploiement en production

## Nouveaut√©s de la Version 5.3.0

### Am√©liorations UI/UX
- ‚úÖ S√©lecteurs de sc√©narios environnementaux align√©s verticalement
- ‚úÖ Nouvelle carte de statistiques de vocabulaire avec comptage en temps r√©el
- ‚úÖ Mise en page am√©lior√©e √† 3 colonnes pour une meilleure densit√© d'information
- ‚úÖ Design responsive am√©lior√©

### Corrections de Bugs
- ‚úÖ Correction de l'erreur de g√©n√©ration de sc√©nario Option 2b
- ‚úÖ R√©solution des probl√®mes de sensibilit√© √† la casse pour le d√©ploiement Linux
- ‚úÖ Correction des r√©f√©rences de fichiers dans les scripts de d√©ploiement
- ‚úÖ Gestion d'erreur am√©lior√©e avec replis gracieux

### Cadre de D√©ploiement
- ‚úÖ Compatibilit√© Linux compl√®te
- ‚úÖ Scripts de validation Windows PowerShell
- ‚úÖ Documentation de d√©ploiement compl√®te
- ‚úÖ Validation de la structure de r√©pertoires mise √† jour

### Qualit√© de la Base de Code
- ‚úÖ Nettoyage des fichiers de sauvegarde et temporaires
- ‚úÖ Organisation des fichiers de test et utilitaires
- ‚úÖ Configuration .gitignore am√©lior√©e
- ‚úÖ Structure de fichiers pr√™te pour la production

\newpage

# D√©marrage

## Configuration Syst√®me Requise

### Configuration Minimale
- **Syst√®me d'Exploitation** : Windows 10+, macOS 10.14+, Ubuntu 18.04+, Debian 10+, CentOS 7+
- **Version R** : 4.3.0 ou sup√©rieure
- **M√©moire** : 4 Go RAM
- **Espace Disque** : 2 Go d'espace libre
- **Affichage** : R√©solution minimale 1280x720
- **Navigateur** : Navigateur web moderne (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)

### Configuration Recommand√©e
- **Version R** : 4.4.3 ou sup√©rieure
- **M√©moire** : 8 Go RAM ou plus
- **Espace Disque** : 5 Go d'espace libre
- **Affichage** : 1920x1080 ou sup√©rieur
- **R√©seau** : Requis pour le d√©ploiement et les fonctionnalit√©s de collaboration

### Packages R Requis

**Packages Principaux (18)** :
```r
shiny, bslib, DT, readxl, openxlsx
ggplot2, plotly, dplyr, visNetwork
shinycssloaders, colourpicker, htmlwidgets, shinyjs
bnlearn, gRain, igraph, DiagrammeR, Rgraphviz
```

Tous les packages sont automatiquement install√©s lorsque l'application d√©marre pour la premi√®re fois.

## Installation

### D√©marrage Rapide (D√©veloppement Local)

```r
# Option 1 : Utilisation de start_app.R (recommand√©)
source("start_app.R")

# Option 2 : Utilisation de app.R
shiny::runApp()
```

### D√©ploiement R√©seau

```r
# D√©marrage avec acc√®s r√©seau
shiny::runApp(host = "0.0.0.0", port = 3838)
```

Accessible via : `http://[ADRESSE-IP]:3838`

### D√©ploiement en Production (Linux)

```bash
# Utiliser le script de d√©ploiement automatis√©
cd deployment
sudo bash deploy_shiny_server.sh
```

Consultez `deployment/DEPLOYMENT.md` pour des instructions d√©taill√©es.

\newpage

# Vue d'Ensemble de l'Interface Utilisateur

## Navigation Principale

L'application comprend 8 onglets principaux :

### 1. Onglet T√©l√©chargement de Donn√©es
- **Option 1** : T√©l√©charger un fichier Excel avec structure de n≈ìud papillon
- **Option 2** : G√©n√©rer un n≈ìud papillon focalis√© √† partir de sc√©narios pr√©-configur√©s
- **Option 2b** : G√©n√©rer un n≈ìud papillon complet avec contr√¥les multiples

### 2. Onglet Flux de Travail Guid√©
Assistant en 8 √©tapes pour la cr√©ation syst√©matique de n≈ìuds papillon :
- √âtape 1 : Configuration du projet
- √âtape 2 : D√©finition du probl√®me central
- √âtape 3 : Menaces et causes
- √âtape 4 : Contr√¥les pr√©ventifs
- √âtape 5 : Cons√©quences
- √âtape 6 : Contr√¥les de protection
- √âtape 7 : R√©vision et validation
- √âtape 8 : Finalisation et export

### 3. Onglet Diagramme en N≈ìud Papillon
Visualisation interactive avec :
- Diagramme r√©seau personnalisable
- Mise en √©vidence des √©l√©ments par couleur
- Contr√¥les de zoom et panoramique
- Info-bulles avec d√©tails des √©l√©ments

### 4. Onglet R√©seau Bay√©sien
Analyse probabiliste avec :
- Conversion de n≈ìud papillon en r√©seau bay√©sien
- Tables de probabilit√© conditionnelle
- Requ√™tes d'inf√©rence
- Analyse de propagation des risques

### 5. Onglet Tableau de Donn√©es
Table de donn√©es compl√®te avec :
- Recherche et filtrage
- Tri sur toutes les colonnes
- Export vers Excel/CSV
- Modification en ligne

### 6. Onglet Matrice des Risques
Visualisation de la matrice de risques avec :
- Zones de risque cod√©es par couleur
- Placement des sc√©narios sur la matrice
- Statistiques de risque
- Affichage de probabilit√©-gravit√©

### 7. Onglet √âvaluation des Risques des Liens
Nouvelle fonctionnalit√© pour l'√©valuation d√©taill√©e des connexions individuelles :
- S√©lection de parcours de sc√©nario
- Curseurs de probabilit√© et gravit√© pour chaque lien
- Calcul du risque global en temps r√©el
- Sauvegarde des √©valuations

### 8. Onglet Gestion du Vocabulaire
Gestion de la base de donn√©es de vocabulaire avec :
- Activit√©s (53 √©l√©ments)
- Pressions (36 √©l√©ments)
- Contr√¥les (74 √©l√©ments)
- Cons√©quences (26 √©l√©ments)

### 9. Onglet Aide
Documentation et aide compl√®tes

\newpage

# Travail avec les Sc√©narios Environnementaux

## Sc√©narios Disponibles

L'application inclut 12 sc√©narios environnementaux pr√©-configur√©s :

### Sc√©narios Environnementaux Principaux (5)

1. **üåä Pollution Marine des Activit√©s Maritimes et C√¥ti√®res**
   - Focus : Pollution maritime, op√©rations portuaires, impacts du transport maritime
   - √âl√©ments : Transport commercial, d√©charge de ballast, d√©versements d'hydrocarbures
   - Cons√©quences : D√©gradation des √©cosyst√®mes marins, probl√®mes de qualit√© de l'eau

2. **üè≠ Contamination Industrielle par Rejet Chimique**
   - Focus : Processus industriels, d√©chets chimiques, fabrication
   - √âl√©ments : M√©taux lourds, d√©chets toxiques, contamination des eaux souterraines
   - Cons√©quences : Impacts sur la sant√© humaine, d√©gradation des sols

3. **üö¢ D√©versements d'Hydrocarbures du Transport Maritime**
   - Focus : Transport p√©trolier, op√©rations de p√©troliers
   - √âl√©ments : Pollution aux hydrocarbures, contamination de surface
   - Cons√©quences : Destruction de l'habitat c√¥tier, pertes √©conomiques

4. **üåæ Ruissellement Agricole Causant l'Eutrophisation**
   - Focus : Application d'engrais, √©levage
   - √âl√©ments : Pollution par nutriments, contamination par pesticides
   - Cons√©quences : Prolif√©ration d'algues, appauvrissement en oxyg√®ne, mortalit√© des poissons

5. **üêü Surp√™che et √âpuisement des Stocks Commerciaux**
   - Focus : P√™che commerciale, √©puisement des ressources marines
   - √âl√©ments : Surexploitation, prises accessoires, destruction d'habitat
   - Cons√©quences : D√©s√©quilibre √©cosyst√©mique, extinction d'esp√®ces

### Sc√©narios Sp√©cifiques √† la Martinique (7)

6. **üèñÔ∏è √ârosion C√¥ti√®re et D√©gradation des Plages**
7. **üåä Impacts des Afflux de Sargasses**
8. **ü™∏ D√©gradation et Blanchiment des R√©cifs Coralliens**
9. **üíß Pollution des Bassins Versants par l'Agriculture**
10. **üå≥ D√©gradation des For√™ts de Mangrove**
11. **üå™Ô∏è Impacts des Ouragans et Temp√™tes Tropicales**
12. **üö¢ Pressions Environnementales du Tourisme Marin**

## Utilisation des Sc√©narios

### Option 2 : G√©n√©ration de N≈ìud Papillon Focalis√©

G√©n√®re un n≈ìud papillon propre et focalis√© avec :
- **1 contr√¥le pr√©ventif** par combinaison activit√©-pression
- **~20-30 lignes de donn√©es**
- **Id√©al pour** : √âvaluations initiales, pr√©sentations, formation

**√âtapes** :
1. Aller √† l'onglet **T√©l√©chargement de Donn√©es**
2. Descendre √† **Option 2**
3. S√©lectionner un sc√©nario environnemental
4. Cliquer sur **"G√©n√©rer des Donn√©es"**
5. Voir les r√©sultats dans l'onglet **Diagramme en N≈ìud Papillon**

### Option 2b : N≈ìud Papillon Complet

G√©n√®re un n≈ìud papillon d√©taill√© avec :
- **2-3 contr√¥les pr√©ventifs** par combinaison activit√©-pression
- **~40-90 lignes de donn√©es**
- **Id√©al pour** : Planification d√©taill√©e, conformit√©, gestion des risques

**√âtapes** :
1. Aller √† l'onglet **T√©l√©chargement de Donn√©es**
2. Descendre √† **Option 2b**
3. S√©lectionner un sc√©nario environnemental
4. Cliquer sur **"Contr√¥les Multiples"**
5. Examiner l'analyse compl√®te

\newpage

# Syst√®me de Flux de Travail Guid√©

## Vue d'Ensemble

Le Flux de Travail Guid√© fournit un assistant en 8 √©tapes pour la cr√©ation syst√©matique de n≈ìuds papillon utilisant la base de donn√©es de vocabulaire de l'application.

## Guide √âtape par √âtape

### √âtape 1 : Configuration du Projet

**Objectif** : D√©finir les informations de base du projet

**Champs** :
- Nom du Projet
- Description
- Nom de l'√âvaluateur des Risques
- Date
- Mod√®le de Sc√©nario Environnemental (optionnel)

**Actions** :
- Remplir tous les champs requis
- S√©lectionner un mod√®le de sc√©nario si applicable
- Cliquer sur **"√âtape Suivante"** pour continuer

### √âtape 2 : D√©finition du Probl√®me Central

**Objectif** : Identifier le probl√®me environnemental principal

**Champs** :
- √ânonc√© du Probl√®me
- Cat√©gorie du Probl√®me
- Port√©e G√©ographique
- Port√©e Temporelle

**Conseils** :
- √ätre sp√©cifique et mesurable
- Se concentrer sur un probl√®me central
- Consid√©rer les limites spatiales et temporelles

### √âtape 3 : Menaces et Causes

**Objectif** : Identifier les activit√©s et pressions menant au probl√®me

**Processus** :
1. **S√©lectionner les Activit√©s** (parmi 53 options)
   - Utiliser la fonctionnalit√© de recherche
   - S√©lectionner les activit√©s humaines pertinentes
   - Cliquer sur "Ajouter une Activit√©"

2. **S√©lectionner les Pressions** (parmi 36 options)
   - Choisir les pressions environnementales
   - Lier aux activit√©s
   - Voir le tableau des connexions activit√©-pression

**Int√©gration du Vocabulaire** :
- Recherche en temps r√©el dans toutes les activit√©s
- Widgets de recherche vides pour saisie imm√©diate
- Pr√©vention des doublons
- Retour visuel avec tableaux de donn√©es

### √âtape 4 : Contr√¥les Pr√©ventifs

**Objectif** : Identifier les mesures pour pr√©venir ou r√©duire les menaces

**Processus** :
1. Examiner les menaces s√©lectionn√©es √† l'√âtape 3
2. Rechercher parmi 74 contr√¥les disponibles
3. S√©lectionner les mesures pr√©ventives appropri√©es
4. Assigner les contr√¥les √† des menaces sp√©cifiques
5. Voir le tableau des contr√¥les avec assignations

**Cat√©gories de Contr√¥les** :
- Contr√¥les techniques
- Contr√¥les proc√©duraux
- Contr√¥les bas√©s sur les politiques
- Syst√®mes de surveillance

### √âtape 5 : Cons√©quences

**Objectif** : Identifier les impacts environnementaux potentiels

**Processus** :
1. Rechercher parmi 26 cat√©gories de cons√©quences
2. S√©lectionner les impacts environnementaux pertinents
3. √âvaluer les niveaux de gravit√©
4. Lier les cons√©quences au probl√®me central
5. Examiner la hi√©rarchie des cons√©quences

**Types d'Impacts** :
- Impacts sur l'√©cosyst√®me
- Impacts sur la biodiversit√©
- Impacts sur la sant√© humaine
- Impacts √©conomiques
- Impacts sociaux

### √âtape 6 : Contr√¥les de Protection

**Objectif** : Identifier les mesures d'att√©nuation et de r√©cup√©ration

**Processus** :
1. Examiner les cons√©quences s√©lectionn√©es
2. S√©lectionner les att√©nuations protectrices
3. Assigner les contr√¥les de r√©cup√©ration
4. D√©finir les facteurs d'escalade (si applicable)
5. Compl√©ter la structure du n≈ìud papillon

**Types d'Att√©nuation** :
- R√©ponse d'urgence
- Limitation des dommages
- Mesures de r√©cup√©ration
- Activit√©s de restauration

### √âtape 7 : Facteurs d'Escalade

**Objectif** : Identifier les facteurs qui affaiblissent l'efficacit√© des contr√¥les

**Processus** :
1. D√©finir les facteurs d'escalade personnalis√©s
2. Lier aux contr√¥les pr√©ventifs
3. Lier aux contr√¥les de protection
4. Voir les tables des contr√¥les √† risque

**Types de Facteurs** :
- Contraintes budg√©taires
- Conditions m√©t√©orologiques extr√™mes
- Erreur humaine
- Lacunes r√©glementaires
- D√©faillance d'√©quipement

### √âtape 8 : R√©vision et Finalisation

**Objectif** : V√©rifier l'exhaustivit√© et la coh√©rence

**Contenu de la R√©vision** :
- R√©sum√© complet de tous les √©l√©ments
- Affichage c√¥te √† c√¥te : pr√©vention et att√©nuation
- Statistiques d'√©valuation
- Options d'export

**Actions** :
- Examiner tous les composants
- V√©rifier les connexions
- Exporter vers Excel/PDF (futur)
- Charger dans l'application principale

\newpage

# T√©l√©chargement et Gestion des Donn√©es

## Formats de Donn√©es Support√©s

### Fichiers Excel (.xlsx, .xls)

**Structure Requise** :

| Colonne | Description | Requis |
|---------|-------------|--------|
| Activity | Activit√© humaine | Oui |
| Pressure | Pression environnementale | Oui |
| Preventive_Control | Mesure de contr√¥le pr√©ventif | Oui |
| Escalation_Factor | Facteur d'escalade | Oui |
| Central_Problem | Probl√®me central | Oui |
| Protective_Mitigation | Att√©nuation protectrice | Oui |
| Consequence | Cons√©quence | Oui |
| Likelihood | Probabilit√© (1-5) | Non |
| Severity | Gravit√© (1-5) | Non |

**Colonnes Optionnelles** :
- Colonnes de risque granulaires (Activity_to_Pressure_Likelihood, etc.)
- M√©tadonn√©es du projet
- Notes d'√©valuation

### Fichiers RDS (.rds)

Format R natif pour sauvegardes de flux de travail :
- Pr√©serve toute la structure des donn√©es
- Inclut les m√©tadonn√©es du flux de travail
- Permet la reprise du travail

### Fichiers CSV (.csv)

Support de base pour l'importation de tableaux :
- M√™mes colonnes que Excel
- Encodage UTF-8 recommand√©
- D√©limiteur virgule

## Validation des Donn√©es

Le syst√®me valide automatiquement :

1. **Colonnes Requises** : V√©rifie la pr√©sence de toutes les colonnes obligatoires
2. **Types de Donn√©es** : Valide les valeurs num√©riques pour probabilit√©/gravit√©
3. **Plages** : Assure que probabilit√© et gravit√© sont entre 1-5
4. **Relations** : V√©rifie les connexions logiques entre √©l√©ments
5. **Compl√©tude** : Identifie les valeurs manquantes

## Options d'Export de Donn√©es

### 1. Export Excel

Fonctionnalit√©s :
- Structure compl√®te de n≈ìud papillon
- Formatage pr√©serv√©
- Plusieurs feuilles de calcul support√©es
- Pr√™t pour partage et collaboration

### 2. Export RDS

Fonctionnalit√©s :
- Pr√©serve toutes les m√©tadonn√©es
- Format sp√©cifique R
- Compression automatique
- Id√©al pour sauvegardes

### 3. Export CSV

Fonctionnalit√©s :
- Compatibilit√© universelle
- Compatible Excel
- Format texte brut
- Bon pour l'int√©gration

### 4. Exports Visuels

Fonctionnalit√©s :
- Export PNG du diagramme
- Export HTML interactif
- R√©solution personnalisable
- Pr√™t pour pr√©sentations

\newpage

# Analyse par R√©seau Bay√©sien

## Vue d'Ensemble

L'analyse par r√©seau bay√©sien fournit une mod√©lisation probabiliste des parcours de risque, permettant l'inf√©rence et l'analyse quantitative des risques.

## Concepts Cl√©s

### Tables de Probabilit√© Conditionnelle (TPC)

Les TPC d√©finissent les relations probabilistes entre les n≈ìuds :
- Probabilit√©s de n≈ìuds parents
- Probabilit√©s conditionnelles
- Effets d'interaction
- Calculs de propagation

### Inf√©rence Probabiliste

Types de requ√™tes support√©es :
- Probabilit√© marginale
- Probabilit√© conditionnelle
- Explication la plus probable
- Valeur la plus probable

## Utilisation de l'Analyse Bay√©sienne

### √âtape 1 : Convertir le N≈ìud Papillon en R√©seau Bay√©sien

1. Charger ou g√©n√©rer des donn√©es de n≈ìud papillon
2. Aller √† l'onglet **R√©seau Bay√©sien**
3. Cliquer sur **"G√©n√©rer le R√©seau"**
4. Examiner la structure du r√©seau

### √âtape 2 : D√©finir les Probabilit√©s

**Probabilit√©s des N≈ìuds Racines** :
- Probabilit√© d'occurrence des activit√©s
- Valeurs bas√©es sur la fr√©quence
- Exemples : 0.1 (rare), 0.5 (mod√©r√©), 0.9 (fr√©quent)

**Probabilit√©s Conditionnelles** :
- Probabilit√© qu'une pression se produise √©tant donn√© une activit√©
- Efficacit√© des contr√¥les
- Probabilit√© de cons√©quences

### √âtape 3 : Ex√©cuter des Requ√™tes d'Inf√©rence

Exemples de requ√™tes :

```r
# Probabilit√© de d√©gradation de l'√©cosyst√®me marin
querygrain(junction, nodes="Marine_Ecosystem_Degradation")

# Probabilit√© √©tant donn√© qu'un d√©versement d'hydrocarbures s'est produit
setEvidence(junction, nodes="Oil_Spill", states="yes")

# Cause la plus probable √©tant donn√© la cons√©quence observ√©e
querygrain(junction, nodes="Activity", type="joint")
```

### √âtape 4 : Identifier les Chemins Critiques

Le syst√®me identifie automatiquement :
- Chemins √† haut risque
- N≈ìuds goulots d'√©tranglement
- Contr√¥les critiques
- Cons√©quences dominantes

### √âtape 5 : Analyse de Propagation des Risques

Analyse comment les risques se propagent √† travers :
- Connexions activit√©-pression
- Efficacit√© des contr√¥les
- Chemins de cons√©quences
- Impact des facteurs d'escalade

## Directives d'Interpr√©tation

### Niveaux de Risque

- **Faible (< 0.3)** : Surveillance de routine
- **Moyen (0.3-0.7)** : Surveillance active requise
- **√âlev√© (> 0.7)** : Action imm√©diate requise

### Prise de D√©cision

Utiliser les r√©sultats bay√©siens pour :
- Prioriser les interventions
- Allouer les ressources
- Concevoir des strat√©gies de surveillance
- Planifier la r√©ponse d'urgence

\newpage

# Matrice des Risques et Visualisation

## Vue d'Ensemble de la Matrice des Risques

La matrice des risques fournit une repr√©sentation visuelle de la probabilit√© vs gravit√© :
- Axe X : Probabilit√© (1-5)
- Axe Y : Gravit√© (1-5)
- Zones cod√©es par couleur : Faible, Moyen, √âlev√©

## Cat√©gories de la Matrice

### Risque Faible (Zone Verte)
- **Plage de Score** : 1-6
- **Caract√©ristiques** : Peu probable et impact mineur
- **Action** : Surveillance de routine

### Risque Moyen (Zone Jaune)
- **Plage de Score** : 7-15
- **Caract√©ristiques** : Probabilit√© mod√©r√©e ou gravit√© mod√©r√©e
- **Action** : Surveillance active et mesures pr√©ventives

### Risque √âlev√© (Zone Rouge)
- **Plage de Score** : 16-25
- **Caract√©ristiques** : Probabilit√© √©lev√©e et/ou gravit√© √©lev√©e
- **Action** : Action imm√©diate et gestion proactive

## Utilisation de la Matrice des Risques

**√âtapes** :
1. Aller √† l'onglet **Matrice des Risques**
2. Voir le placement des sc√©narios
3. Identifier les risques √† haute priorit√©
4. Examiner les statistiques de risque
5. Exporter la visualisation de la matrice

**Fonctionnalit√©s** :
- Placement automatique des sc√©narios
- Info-bulles interactives
- Statistiques de comptage des risques
- Capacit√©s d'export

## Fonctionnalit√©s de Visualisation

### Personnalisation du Diagramme en N≈ìud Papillon

Options disponibles :
- **Taille des N≈ìuds** : Ajuster pour visibilit√©
- **Largeur des Bords** : √âpaisseur bas√©e sur le risque
- **Sch√©ma de Couleurs** : Choix de palette de couleurs
- **Disposition** : Algorithme hi√©rarchique
- **√âtiquettes** : Afficher/masquer les noms
- **L√©gende** : Afficher/masquer les codes de couleur

**Personnalisation des Couleurs** :
- Activit√©s : Violet
- Pressions : Rouge
- Contr√¥les Pr√©ventifs : Vert
- Facteurs d'Escalade : Orange
- Probl√®me Central : Rouge fonc√©
- Att√©nuations Protectrices : Bleu
- Cons√©quences : Orange fonc√©

### Visualisation du R√©seau

Fonctionnalit√©s :
- Zoom et panoramique
- Mode plein √©cran
- Export d'images
- Info-bulles avec d√©tails
- Mise en √©vidence des n≈ìuds
- Filtrage des bords

### Visualisation du Tableau de Donn√©es

Fonctionnalit√©s :
- Tri par colonne
- Recherche et filtrage
- Pagination
- S√©lection de lignes
- Mise en √©vidence conditionnelle
- Export vers Excel/CSV

\newpage

# Fonctionnalit√©s Avanc√©es

## Gestion du Vocabulaire

### Comprendre la Base de Donn√©es de Vocabulaire

La base de donn√©es de vocabulaire contient 189 √©l√©ments cat√©goris√©s :
- **Activit√©s (53)** : Activit√©s humaines causant des pressions
- **Pressions (36)** : Pressions environnementales directes
- **Contr√¥les (74)** : Mesures pr√©ventives et protectrices
- **Cons√©quences (26)** : Impacts environnementaux

### Voir les Statistiques du Vocabulaire

1. Aller √† l'onglet **T√©l√©chargement de Donn√©es**
2. Voir la carte **Statistiques du Vocabulaire**
3. Examiner le comptage des √©l√©ments
4. V√©rifier la couverture de la base de donn√©es

### Ajouter du Vocabulaire Personnalis√©

**Via Flux de Travail Guid√©** :
1. Dans n'importe quelle √©tape, saisir un nouvel √©l√©ment
2. Le syst√®me sugg√®re des √©l√©ments existants
3. Si non trouv√©, ajouter comme nouveau
4. Sauvegarder avec le projet

**Via Gestion du Vocabulaire** :
1. Aller √† l'onglet **Gestion du Vocabulaire**
2. S√©lectionner le type (Activit√©/Pression/Contr√¥le/Cons√©quence)
3. Cliquer sur **"Ajouter Nouvel √âl√©ment"**
4. Remplir les d√©tails
5. Sauvegarder

### √âditer le Vocabulaire

1. Rechercher l'√©l√©ment existant
2. S√©lectionner pour √©dition
3. Modifier les champs
4. Sauvegarder les changements
5. Mettre √† jour les projets li√©s

### Importer du Vocabulaire

Formats support√©s :
- Fichiers Excel avec structure pr√©d√©finie
- Fichiers CSV avec colonnes requises
- Fichiers RDS avec objets de vocabulaire

\newpage

# Support Multilingue

## Changer de Langue

1. Localiser le s√©lecteur de langue dans l'en-t√™te
2. Cliquer sur le drapeau ou menu d√©roulant
3. S√©lectionner **English** ou **Fran√ßais**
4. L'interface se met √† jour instantan√©ment

## √âl√©ments Support√©s

**Texte Traduit** :
- Navigation des onglets
- √âtiquettes des boutons
- Titres des formulaires
- Messages d'erreur
- Notifications
- Texte d'aide

**Non Traduit** :
- Contenu des donn√©es utilisateur
- Noms de vocabulaire personnalis√©s
- Notes de projet
- Commentaires

## Ajouter des Traductions

Pour contribuer des traductions :

1. Ouvrir `translations_data.R`
2. Ajouter de nouvelles cl√©s √† la liste `translations`
3. Fournir des traductions en anglais et fran√ßais
4. Tester dans l'application
5. Soumettre une pull request

Exemple :
```r
translations <- list(
  en = list(
    new_key = "English text"
  ),
  fr = list(
    new_key = "Texte fran√ßais"
  )
)
```

\newpage

# √âvaluation des Risques des Liens

## Vue d'Ensemble

L'onglet √âvaluation des Risques des Liens permet une √©valuation d√©taill√©e de chaque connexion dans la structure du n≈ìud papillon.

## Utilisation de l'Outil

### √âtape 1 : S√©lectionner un Parcours

1. Aller √† l'onglet **√âvaluation des Risques des Liens**
2. S√©lectionner un sc√©nario dans le menu d√©roulant
3. Examiner les informations sur le parcours s√©lectionn√©

### √âtape 2 : √âvaluer les Connexions

Pour chaque connexion, d√©finir :

**1. Activit√© ‚Üí Pression**
- Probabilit√© (1-5) : Quelle est la probabilit√© que l'activit√© entra√Æne la pression ?
- Gravit√© (1-5) : Quelle est la gravit√© de cette connexion ?

**2. Pression ‚Üí Contr√¥le Pr√©ventif**
- Probabilit√© : Avec quelle probabilit√© la pression se produit-elle avec le contr√¥le en place ?
- Gravit√© : Quelle est l'efficacit√© du contr√¥le ?

**3. Facteur d'Escalade ‚Üí Contr√¥le**
- Probabilit√© : Avec quelle probabilit√© le facteur compromet-il le contr√¥le ?
- Gravit√© : Quelle est la gravit√© de cette compromission ?

**4. Probl√®me Central ‚Üí Cons√©quence**
- Probabilit√© : Avec quelle probabilit√© le probl√®me entra√Æne-t-il la cons√©quence ?
- Gravit√© : Quelle est la gravit√© de la cons√©quence ?

**5. Contr√¥le de Protection ‚Üí Cons√©quence**
- Probabilit√© : Quelle est l'efficacit√© du contr√¥le protecteur ?
- Gravit√© : Quelle est la r√©duction d'impact ?

### √âtape 3 : Examiner le Risque Global

Le syst√®me calcule automatiquement :
- **Probabilit√© Globale** : Multiplication en cha√Æne de toutes les probabilit√©s
- **Gravit√© Globale** : Gravit√© maximale le long du parcours
- **Niveau de Risque** : Faible/Moyen/√âlev√©
- **Score de Risque** : Valeur num√©rique

### √âtape 4 : Sauvegarder les √âvaluations

1. Examiner tous les curseurs
2. Cliquer sur **"Sauvegarder les √âvaluations des Risques"**
3. Les donn√©es sont mises √† jour imm√©diatement
4. Continuer avec le prochain sc√©nario

### √âtape 5 : R√©initialiser si N√©cessaire

Pour annuler les changements :
1. Cliquer sur **"R√©initialiser aux Valeurs Actuelles"**
2. Les curseurs reviennent aux donn√©es sauvegard√©es

\newpage

# Traitement par Lots

## Traitement de Plusieurs Sc√©narios

Pour analyser plusieurs sc√©narios :

```r
# D√©finir les sc√©narios
scenarios <- c("marine_pollution", "oil_spills", "agricultural_runoff")

# Traiter par lots
results <- lapply(scenarios, function(s) {
  data <- generateScenarioSpecificBowtie(s)
  # Effectuer l'analyse
  analysis <- analyzeBowTie(data)
  return(analysis)
})
```

## Rapportage Automatis√©

Cr√©er des rapports automatis√©s :

```r
# G√©n√©rer un rapport
library(rmarkdown)

render("rapport_bowtie.Rmd",
       params = list(
         scenario = "marine_pollution",
         date = Sys.Date()
       ),
       output_file = paste0("rapport_", Sys.Date(), ".pdf"))
```

\newpage

# D√©pannage

## Probl√®mes Courants

### 1. L'Application Ne D√©marre Pas

**Sympt√¥mes** : Erreur lors de l'ex√©cution de `source("start_app.R")`

**Solutions** :
- V√©rifier que R 4.3.0+ est install√©
- Installer les packages manquants : `install.packages(c("shiny", "bslib", "DT"))`
- V√©rifier les permissions des fichiers
- Consulter les journaux d'erreurs dans la console R

### 2. Erreur de T√©l√©chargement de Donn√©es

**Sympt√¥mes** : "Erreur lors du chargement des donn√©es"

**Solutions** :
- V√©rifier le format du fichier (Excel, CSV, RDS)
- Valider la structure des colonnes
- V√©rifier la plage des valeurs (probabilit√©/gravit√© 1-5)
- Assurer l'encodage UTF-8 pour les fichiers CSV

### 3. Diagramme en N≈ìud Papillon Vide

**Sympt√¥mes** : Aucun n≈ìud affich√©

**Solutions** :
- Confirmer que les donn√©es sont charg√©es (v√©rifier l'onglet Tableau de Donn√©es)
- Actualiser le navigateur (Ctrl+F5)
- V√©rifier les messages d'erreur dans la console
- R√©g√©n√©rer les donn√©es

### 4. √âchec du R√©seau Bay√©sien

**Sympt√¥mes** : "Erreur lors de la cr√©ation du r√©seau"

**Solutions** :
- V√©rifier que toutes les colonnes requises sont pr√©sentes
- Valider les relations entre les n≈ìuds
- Assurer des noms de colonnes uniques
- R√©duire la complexit√© (moins de n≈ìuds)

### 5. Probl√®mes de Performance

**Sympt√¥mes** : Application lente ou non r√©active

**Solutions** :
- R√©duire la taille de l'ensemble de donn√©es (< 1000 lignes)
- Fermer les onglets de navigateur non utilis√©s
- Augmenter la m√©moire allou√©e √† R
- Utiliser un navigateur plus r√©cent

### 6. Erreurs d'Export

**Sympt√¥mes** : L'export √©choue ou fichier corrompu

**Solutions** :
- V√©rifier les permissions d'√©criture
- Assurer un espace disque suffisant
- Essayer un format de fichier diff√©rent
- V√©rifier les caract√®res sp√©ciaux dans les noms de fichiers

## Obtenir de l'Aide

### Documentation

- Manuel Utilisateur (ce document)
- R√©f√©rence API : `docs/API_REFERENCE.md`
- Guide de D√©veloppement : `docs/DEVELOPMENT_GUIDE.md`
- Guide de D√©ploiement : `docs/DEPLOYMENT_GUIDE.md`

### Support Communautaire

- D√©p√¥t GitHub : [Lien du D√©p√¥t]
- Probl√®mes : Soumettre des rapports de bugs via GitHub Issues
- Discussions : Forum de la communaut√©

### Support Professionnel

- Email : [Email de Support]
- Documentation : [URL de la Documentation]
- Formation : Disponible sur demande

\newpage

# Meilleures Pratiques

## Gestion de Projet

1. **Commencer Simple**
   - Utiliser des sc√©narios pr√©-configur√©s
   - Construire progressivement la complexit√©
   - Valider √† chaque √©tape

2. **Documentation**
   - Documenter les hypoth√®ses
   - Enregistrer les justifications des d√©cisions
   - Maintenir l'historique des versions

3. **Collaboration**
   - Utiliser des formats de fichiers standardis√©s
   - Partager via RDS ou Excel
   - Maintenir une convention de nommage

4. **Contr√¥le de Version**
   - Sauvegarder r√©guli√®rement le travail
   - Utiliser des noms de fichiers dat√©s
   - Maintenir des sauvegardes

## √âvaluation des Risques

1. **Exhaustivit√©**
   - Consid√©rer tous les parcours pertinents
   - Inclure les contr√¥les pr√©ventifs et protecteurs
   - Documenter les hypoth√®ses

2. **Coh√©rence**
   - Utiliser des crit√®res de notation coh√©rents
   - Appliquer des d√©finitions standardis√©es
   - Maintenir la m√©thodologie

3. **Validation**
   - Examiner avec les parties prenantes
   - V√©rifier la logique
   - Tester la sensibilit√©

4. **Mise √† Jour**
   - R√©viser p√©riodiquement
   - Mettre √† jour avec de nouvelles informations
   - Suivre les changements au fil du temps

## Qualit√© des Donn√©es

1. **Exactitude**
   - V√©rifier les entr√©es de donn√©es
   - Valider les sources
   - Documenter les incertitudes

2. **Compl√©tude**
   - Remplir tous les champs requis
   - Fournir des m√©tadonn√©es suffisantes
   - Inclure des descriptions

3. **Coh√©rence**
   - Utiliser une terminologie standardis√©e
   - Suivre les conventions de nommage
   - Maintenir l'int√©grit√© r√©f√©rentielle

4. **Tra√ßabilit√©**
   - Enregistrer la provenance des donn√©es
   - Documenter les transformations
   - Maintenir les journaux d'audit

\newpage

# R√©f√©rence Rapide

## Raccourcis Clavier

| Raccourci | Action |
|-----------|--------|
| Ctrl+S | Sauvegarder le travail en cours |
| Ctrl+E | Exporter les donn√©es |
| Ctrl+F | Rechercher dans le tableau |
| Ctrl+H | Afficher/masquer l'aide |
| Ctrl+L | Changer de langue |
| F5 | Actualiser les donn√©es |
| F11 | Mode plein √©cran |

## Formules de Risque

### Score de Risque de Base
```
Score de Risque = Probabilit√© √ó Gravit√©
```

### Probabilit√© Globale
```
P_globale = P_act√ópres √ó P_pres√óctrl √ó P_esc√óctrl √ó P_cent√ócons √ó P_prot√ócons
```

### Gravit√© Globale
```
S_globale = max(S_act√ópres, S_pres√óctrl, S_esc√óctrl, S_cent√ócons, S_prot√ócons)
```

### Classification des Risques
- **Faible** : Score ‚â§ 6
- **Moyen** : 7 ‚â§ Score ‚â§ 15
- **√âlev√©** : Score ‚â• 16

## √âchelles de Probabilit√©

| Valeur | Descripteur | Fr√©quence |
|--------|-------------|-----------|
| 1 | Rare | < 5% de chance |
| 2 | Peu Probable | 5-25% de chance |
| 3 | Possible | 25-50% de chance |
| 4 | Probable | 50-75% de chance |
| 5 | Presque Certain | > 75% de chance |

## √âchelles de Gravit√©

| Valeur | Descripteur | Impact |
|--------|-------------|--------|
| 1 | N√©gligeable | Impact minimal |
| 2 | Mineur | Impact local limit√© |
| 3 | Mod√©r√© | Impact r√©gional |
| 4 | Majeur | Impact √©tendu |
| 5 | Catastrophique | Impact irr√©versible |

\newpage

# Annexes

## Annexe A : Structure des Fichiers de Donn√©es

### Format Excel Complet

```
| Activity | Pressure | Preventive_Control | Escalation_Factor | Central_Problem | Protective_Mitigation | Consequence | Likelihood | Severity | Risk_Level |
|----------|----------|-------------------|-------------------|-----------------|---------------------|-------------|-----------|----------|------------|
```

### Colonnes Granulaires (Optionnel)

```
Activity_to_Pressure_Likelihood
Activity_to_Pressure_Severity
Pressure_to_Control_Likelihood
Pressure_to_Control_Severity
Control_to_Escalation_Likelihood
Control_to_Escalation_Severity
Escalation_to_Central_Likelihood
Escalation_to_Central_Severity
Central_to_Mitigation_Likelihood
Central_to_Mitigation_Severity
Mitigation_to_Consequence_Likelihood
Mitigation_to_Consequence_Severity
```

## Annexe B : Sch√©ma de Base de Donn√©es de Vocabulaire

### Table des Activit√©s
- **Colonnes** : id, hierarchy, name, name_fr, category, description
- **Enregistrements** : 53 activit√©s humaines

### Table des Pressions
- **Colonnes** : id, hierarchy, name, name_fr, category, description
- **Enregistrements** : 36 pressions environnementales

### Table des Contr√¥les
- **Colonnes** : id, hierarchy, name, name_fr, type, category, description
- **Enregistrements** : 74 mesures de contr√¥le

### Table des Cons√©quences
- **Colonnes** : id, hierarchy, name, name_fr, category, severity_range, description
- **Enregistrements** : 26 impacts environnementaux

## Annexe C : Configuration des Sc√©narios

### Structure de Configuration de Sc√©nario

```r
scenario_config <- list(
  id = "identifiant_unique",
  icon = "ic√¥ne_fontawesome",
  label = "Nom d'Affichage",
  description = "Description D√©taill√©e",
  central_problem = "√ânonc√© du Probl√®me",
  specific_activities = c("activit√©1", "activit√©2"),
  specific_pressures = c("pression1", "pression2"),
  specific_consequences = c("cons√©quence1", "cons√©quence2"),
  preventive_controls = c("contr√¥le1", "contr√¥le2"),
  protective_controls = c("protection1", "protection2"),
  escalation_factors = c("facteur1", "facteur2")
)
```

## Annexe D : R√©f√©rence API

### Fonctions Principales

#### `generateScenarioSpecificBowtie(scenario_type)`
G√©n√®re des donn√©es de n≈ìud papillon pour un sc√©nario sp√©cifi√©.

**Param√®tres** :
- `scenario_type` : Identifiant du sc√©nario (cha√Æne)

**Retourne** : data.frame avec structure de n≈ìud papillon

#### `convert_to_main_data_format(workflow_data)`
Convertit les donn√©es de flux de travail en format principal.

**Param√®tres** :
- `workflow_data` : Liste des composants de flux de travail

**Retourne** : data.frame normalis√©

#### `load_vocabulary()`
Charge la base de donn√©es de vocabulaire depuis les fichiers Excel.

**Retourne** : Liste avec activit√©s, pressions, contr√¥les, cons√©quences

#### `create_bowtie_network(data)`
Cr√©e un r√©seau visNetwork depuis les donn√©es.

**Param√®tres** :
- `data` : data.frame de n≈ìud papillon

**Retourne** : Objet visNetwork

## Annexe E : D√©pendances des Packages

### Packages Principaux (18)

1. **shiny** (‚â•1.7.0) - Framework d'application web
2. **bslib** (‚â•0.5.0) - Th√®mes Bootstrap
3. **DT** (‚â•0.28) - Tables de donn√©es interactives
4. **readxl** (‚â•1.4.0) - Lecture de fichiers Excel
5. **openxlsx** (‚â•4.2.5) - √âcriture de fichiers Excel
6. **ggplot2** (‚â•3.4.0) - Graphiques
7. **plotly** (‚â•4.10.0) - Graphiques interactifs
8. **dplyr** (‚â•1.1.0) - Manipulation de donn√©es
9. **visNetwork** (‚â•2.1.2) - Visualisation de r√©seaux
10. **shinycssloaders** (‚â•1.0.0) - Indicateurs de chargement
11. **colourpicker** (‚â•1.3.0) - S√©lection de couleurs
12. **htmlwidgets** (‚â•1.6.0) - Widgets HTML
13. **shinyjs** (‚â•2.1.0) - Fonctionnalit√© JavaScript
14. **bnlearn** (‚â•4.8) - Apprentissage de r√©seaux bay√©siens
15. **gRain** (‚â•1.3.13) - Inf√©rence bay√©sienne
16. **igraph** (‚â•1.5.0) - Analyse de r√©seaux
17. **DiagrammeR** (‚â•1.0.10) - Cr√©ation de diagrammes
18. **Rgraphviz** (‚â•2.42.0) - Disposition de graphes

### Installation

```r
# Installer tous les packages requis
install.packages(c(
  "shiny", "bslib", "DT", "readxl", "openxlsx",
  "ggplot2", "plotly", "dplyr", "visNetwork",
  "shinycssloaders", "colourpicker", "htmlwidgets", "shinyjs",
  "bnlearn", "gRain", "igraph", "DiagrammeR"
))

# Bioconductor pour Rgraphviz
if (!requireNamespace("BiocManager", quietly = TRUE))
    install.packages("BiocManager")
BiocManager::install("Rgraphviz")
```

## Annexe F : R√©f√©rences

### Normes et Lignes Directrices

- ISO 31000:2018 - Gestion des Risques
- IEC 31010:2019 - Techniques d'√âvaluation des Risques
- ISO 14001:2015 - Syst√®mes de Management Environnemental

### Litt√©rature Scientifique

- M√©thodologie du n≈ìud papillon pour l'√©valuation des risques
- R√©seaux bay√©siens en sciences environnementales
- Conservation de la biodiversit√© marine
- Valorisation des services √©cosyst√©miques

### Logiciels et Outils

- Logiciel Statistique R : https://www.r-project.org/
- Framework Shiny : https://shiny.rstudio.com/
- Package bnlearn : https://www.bnlearn.com/
- Package gRain : https://people.math.aau.dk/~sorenh/software/gR/

---

## Informations de Contact

**Projet** : Analyse des Risques Environnementaux par N≈ìud Papillon
**Version** : 5.3.0
**Organisation** : √âquipe Marbefes
**Site Web** : [D√©p√¥t du Projet]
**Support** : [Email de Support]
**Licence** : [Type de Licence]

---

**Fin du Manuel Utilisateur**

*Ce document est sujet √† des mises √† jour. Veuillez v√©rifier la derni√®re version.*
